---
icon: 
expanded: false
label: Режимы
order: 89

---
Двойная Спираль позволяет активировать дополнительные режимы работы поверх основных правил. 

## Компенсации рисков
Двойная Спираль опирурет всегда ограниченным количеством ассетов в себе, перераспределяя их между участниками. В её контуре всегда есть победители, получающие прибыль, и проигравшие, оплачивающие её фиксированной величиной своих изначальных балансов участия. 

В некоторых задачах применения, таких как децентрализованное распределение системного ассета, необходимо создать условия, при которых со временем количество ликвидных ассетов растёт от действий участников. Для этого, к двойной спирали одного из центров системы, может быть подключён компенсатор рисков. 

Компенстатор - это динамический регулятор риска, который использует резервный фонд для эмиссии системного ассета через компенсацию рисков участников, поддерживающих развитие центра своими вкладами. 

Компенсатор извлекает системный ассет из резервного фонда и помещает его в цифровой договор центра в момент совершения взноса участником на тот случай, если по результату цикла Двойной Спирали, участник понесет потери. В этом случае, система выплатит ему его взнос в соответствии с процентной величиной компенсации. 

Компенсатор устанавливается в процентнах от вклада и не может превышать коэффициент риска центра двойной спирали. Если установленный компенсатор меньше, чем коэффициент риска центра, участник понесёт потери в разнице между ними. 

Базовые правила работы Двойной Спирали при подключенном компенсаторе сохраняются, кроме возможности немедленного вывода баланса на противоположном цвете. Прибыль из двойной спирали можно вывести на своём цвете в любой момент, компенсированные потери можно вывести только после завершения цикла, или после переключения их в прибыль на следующем полуобороте. 



### Пример


```
Доход за оборот: +5%
Риск: 100%
Компенсатор: 100%
```
Участник внёс в центр 100 FLOWER, система в этот же момент произвела дополнительную эмиссию 100 FLOWER из резервного фонда, поместив их в цифровой договор центра. Все участники в своих пулах обладают возможностью вывода прибыли в любой момент. Если наш участник находится в чужом пуле, то вывод для него недоступен до завершения цикла. Когда цикл будет завершен, он получит свой вклад по номиналу, т.е. 100 FLOWER. Двойная Спираль, при этом, выплатит прибыль и весь бизнес-доход по своим правилам. 

Предположим, что компенсатор риска изменил свою величину до 90%
```
Доход за оборот: +5%
Риск: 100%
Компенсатор: 90%
```
Тогда система, в момент взноса участника, эмитирует из резервного фонда только 90 FLOWER, которые передаст участнику в случае остановки развития на чужом пуле. 


### Подключение
Компенсатор риска может быть подключён только к центру с именем аккаунта core. Подключение и изменение величины компенсации рисков осуществляет системный аккаунт производителей блоков eosio. Для подключения, центр core должен обладать активированной двойной спиралью, а система - наполненным резервным фондом на аккаунте eosio.saving с переданными правами управления на аккаунт eosio.

``` Выпуск ассетов в резервный фонд
cleos push action eosio.token issue '["eosio.saving", "1000000000.0000 FLOWER"]' -p eosio
```

``` Передача активных разрешений производителям
cleos set account permission eosio.saving active '{"threshold": 1,"keys": [],"accounts": [{"permission":{"actor":"eosio","permission":"eosio.code"},"weight":1}]}' owner -p eosio.saving
```

``` Компенсация 100% риска
cleos push action unicore compensator '[core, 1000000]' -p eosio
```





## Холостой ход
Холостой ход - это принцип эмисии в центр, при котором производится сжигание квантов спирали. Сжигание квантов толкает спираль к обороту. Эмитированные в центр ассеты могут быть изъяты из оборота только участниками по правилам двойной спирали. Не использованные ассеты остаются в цифровом договоре центра без возможности изъятия. Холостой ход наполняет фонды центра по правилам вращения двойной спирали. 

### Подключение
Холостой ход может быть подключен к аккаунту любого центра от имени аккаунта производителей блоков eosio. Для этого, им потребуется установить параметры эмиссии в системном цифровом договоре. Центр, при этом, должен обладать активированной двойной спиралью. 

``` cpp
seteparams( int64_t new_tokens_per_block, int64_t to_producers_percent, int64_t to_saving_percent, int64_t per_block_pay_percent, int64_t per_vote_pay_percent, bool spraying_enabled, int64_t new_tokens_for_spraying, int64_t spraying_period_in_blocks, int64_t spraying_rotation_percent, int64_t spraying_core_funds_percent, name core_host ){

cleos push action eosio seteparams '[10000, 50, 50, 50, 50, true, 10000000, 7200, 50, 50, "core"]' -p eosio
```
Подробнее об установке экономических параметров смотри в разделе цифровые договора / системный договор.


## Продажа ассета
COUNTERUNIT - это режим работы двойной спирали, где нет события проигрыша. В этом режиме проигравшие участники автоматически покупают ассет распределения на сумму своего риска. 

Режим может использоваться для токенсейлов, проводимыми центрами. Единственный способ получить ассет распределения в таком центре - это проиграть в двойной спирали по её правилам. Подключение и выключение продаж любых токенов доступно в любой момент в каждом центре.

!!! Внимание 
Если перезагрузки в центре активированы (время до насыщения конечно), спираль перезапустит продажи по самому первому курсу после её автоматического перезапуска в новом цикле. Поэтому, не забудьте отключить режим продаж в центре после их логического завершения. 
!!!

В случае подключения режима продаж ассета из резервного фонда, активируется режим ульта-распыления, при котором, в оборот вводятся новые системные ассеты согласно конфигурации двойной спирали в момент проигрыша участников. Тогда, сумма вывода всех проигравших участников может значительно превышать сумму вывода всех победителей. То же верно и для любых других ассетов, распределяемых из локальных фондов центра. 

### Подключение
``` создаём фонд продаж и наполняем его
cleos push action tokencontract transfer '[tokencontract, unicore, "100000.0000 SYS", "666-fund_purpose"]
```
Создать и наполнить фонд продаж может только владелец цифрового договора ассета, который устанавливается на продажу. 

``` подключаем центр к фонду
cleos push action unicore addhostofund '[0, code]' -p eosio
```
Если подключить несколько центров к одному фонду, то каждый из них сможет активировать режим продаж из него.


``` продаём ассет SYS проигравшим
cleos push action unicore enablesale '[hostname, token_contract, "10000.0000 SYS", 0, counterunit]' -p hostname
```
Подробнее о назначении параметров смотрите в разделе цифровой договор центра.

## Продажа силы
COUNTERPOWER - это режим работы двойной спирали, где вместо события проигрыша просходит продажа силы центра на сумму риска. Режим позволяет распределить долю владения и управления центром через двойную спираль, где единственным способом получения силы является факт проигрыша в двойной спирали по её правилам. 

### Подключение
``` распределяем силу на проигравших по рынку
cleos push action unicore enablesale '[hostname, token_contract, "0.0000 FLOWER", 0, counterpower]' -p hostname
```
Подробнее о назначении параметров смотрите в разделе цифровой договор центра.

